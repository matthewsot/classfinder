@{
    ViewBag.Title = "ResetPass";
    Layout = "~/Views/Shared/_DefaultLayout.cshtml";
}
@section Head {
    <script src="~/Scripts/jQuery/jquery.signalR-1.1.1.min.js" type="text/javascript"></script>
}
<h2>Reset Your Password</h2>
To reset your password, just enter in a new one twice below.
<br/>
<input type="password" id="pass" class="inputter" /><br/>
<input type="password" id="conf" class="inputter" /><br/>
<button id="resetBtn">Reset Password</button>

<script src="~/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">
    /* <SignalR stuff> */
    accnt = $.connection.account;
    $.connection.hub.start();
    /* </SignalR stuff> */

    $('#resetBtn').click(function () {
        var Pass = $('#pass').val();
        if (Pass == $('#conf').val()) {
            accnt.server.resetPassword("@ViewBag.Code", Pass).done(function (DidWork) {
                if (DidWork) {
                    alert("Your password has been reset! Please login with your new password");
                }
                else {
                    alert("Something went wrong, please try again to reset your password");
                }
                window.location.href = "http://classfinder.me/";
            });
        } else {
            alert("Your passwords don't match, please try again");
        }
    });
</script>